<?xml version="1.0" encoding="utf-8"?>
<queries>
  <query key="SSPDSelectBalanceUnits">
    <default><![CDATA[SELECT
  balanceUnitId,
  balanceUnitName,
  ksssBalanceUnitId,
  ksssContragentId,
  isBlocked
FROM
  {0}]]></default>
  </query>
  <query key="SelectDocflowParamsValue">
    <mssql><![CDATA[SELECT Value FROM Sungero_Docflow_Params WHERE ([Key] = '{0}')]]></mssql>
    <postgres><![CDATA[SELECT Value FROM Sungero_Docflow_Params WHERE (Key = '{0}')]]></postgres>
  </query>
  <query key="InsertOrUpdateDocflowParamsValue">
    <mssql><![CDATA[if not exists(select 1 from [dbo].[Sungero_Docflow_Params] where [Key] = '{0}')
  insert [Sungero_Docflow_Params] ([Key],Value) values ('{0}', '{1}')
else UPDATE Sungero_Docflow_Params SET Value = '{1}' WHERE ([Key] = '{0}')]]></mssql>
    <postgres><![CDATA[do $$
begin
  if not exists(select 1 from Sungero_Docflow_Params where Key = '{0}')
  then
    insert into Sungero_Docflow_Params (Key, Value) values ('{0}', '{1}');
  else
    UPDATE Sungero_Docflow_Params SET Value = '{1}' WHERE (Key = '{0}');
  end if;
end$$;]]></postgres>
  </query>
  <query key="SSPDSelectActualOrgstructure">
    <default><![CDATA[SELECT
  orgstructureId,
  ouid,
  displayName,
  ounr,
  balanceUnitId,
  pouid,
  isBlocked
FROM
  {0}
WHERE
  balanceUnitId is not null and
  updateDate > @previousDate]]></default>
  </query>
  <query key="SSPDSelectActiveOrgstructure">
    <default><![CDATA[SELECT
  orgstructureId,
  ouid,
  displayName,
  ounr,
  balanceUnitId,
  pouid,
  isBlocked
FROM
  {0}
WHERE
  balanceUnitId is not null and
  isBlocked = 0]]></default>
  </query>
  <query key="SSPDSelectActualPersons">
    <default><![CDATA[SELECT
  personId,
  Sn,
  givenName,
  middleName,
  Pernr,
  personLogin,
  Mail,
  Title,
  postalCode,
  Co,
  L,
  Street,
  Building,
  House,
  physicalDeliveryOfficeName,
  phoneCity,
  phoneInt,
  orgstructureId,
  balanceUnitId,
  isBlocked,
  isManager
FROM
  {0}
WHERE
  orgstructureId is not null and
  balanceUnitId is not null and
  updateDate > @previousDate]]></default>
  </query>
  <query key="SSPDSelectActivePersons">
    <default><![CDATA[SELECT
  personId,
  Sn,
  givenName,
  middleName,
  Pernr,
  personLogin,
  Mail,
  Title,
  postalCode,
  Co,
  L,
  Street,
  Building,
  House,
  physicalDeliveryOfficeName,
  phoneCity,
  phoneInt,
  orgstructureId,
  balanceUnitId,
  isBlocked,
  isManager
FROM
  {0}
WHERE
  orgstructureId is not null and
  balanceUnitId is not null and
  isBlocked = 0]]></default>
  </query>
  <query key="SSPDSelectActiveManagers">
    <default><![CDATA[SELECT
  personId,
  Sn,
  givenName,
  middleName,
  Pernr,
  orgstructureId,
  balanceUnitId
FROM
  {0}
WHERE
  orgstructureId is not null and
  balanceUnitId is not null and
  isManager = 1 and
  isBlocked = 0 and
  employeeStatus = 'Active']]></default>
  </query>
</queries>